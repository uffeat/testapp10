<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="#" type="image/x-icon" />
    <title>Basics</title>
    <script type="module">
      const { create, decorate } = await import("./rollo.js");

      const add_name = (constructor) => {
        return (...args) => {
          const component = constructor(...args);
          component.dataset.constructorName = constructor.name;
          return component;
        };
      };

      const add_stuff = (constructor) => {
        return (...args) => {
          const component = constructor(...args);
          component.classList.add("stuff");
          return component;
        };
      };

      const SomeText = decorate(
        function SomeText() {
          return create("", { text: "some text..." });
        },
        add_name,
        add_stuff
      );

      const some_text = SomeText();
      document.body.append(some_text);

      some_text.effects.add((data) => console.log(data.foo.current), 'foo')
      console.log(some_text.$.foo)
      const set_protected = some_text.reactive.protected.add('foo')
      set_protected(42)
      console.log(some_text.$.foo)

      /*

      const button = create('button', {text: "some text..."})
      const root = create(
        "div",
        { parent: document.body, $foo: 42 },
        create("h1", { text: "Hello World!" }),
        create("h1", { text: "Hello World!" }),
        function(fragment, parent) {
          console.log(this.$.foo)
          this.effects.add((data) => {console.log(this.$.foo)}, 'foo')
          this.$.foo = 43
        }
      );

      root.append(button)

      button.css.stuff = true
      button.attribute.dataMyStuff = true
      button.__.stuff = 'none'
      button.on.click = ((event) => {console.log('clicked')})
      */
    </script>
  </head>
  <body></body>
</html>
